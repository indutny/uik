'use strict';

const puppeteer = require('puppeteer');
const read = require('read');
const debug = require('debug')('uik');
const { spawnSync } = require('child_process');

const REGION_TVDS = [
  '100100163596970', '100100163596971', '100100163598031', '100100163598037',
  '100100163598038', '100100163598039', '100100163598012', '100100163598040',
  '100100163598041', '100100163598013', '100100163598042', '100100163598043',
  '100100163598044', '100100163598045', '100100163598014', '100100163598085',
  '100100163598092', '100100163598046', '100100163598015', '100100163598047',
  '100100163598016', '100100163598048', '100100163598017', '100100163598049',
  '100100163598091', '100100163598018', '100100163598019', '100100163598050',
  '100100163598051', '100100163598020', '100100163598052', '100100163598032',
  '100100163598033', '100100163598093', '100100163598053', '100100163598054',
  '100100163598055', '100100163598056', '100100163598057', '100100163598021',
  '100100163598022', '100100163598083', '100100163598058', '100100163598059',
  '100100163598086', '100100163598060', '100100163598061', '100100163598062',
  '100100163598063', '100100163598064', '100100163598065', '100100163598066',
  '100100163598090', '100100163598034', '100100163598067', '100100163598068',
  '100100163598069', '100100163598070', '100100163598084', '100100163598071',
  '100100163598023', '100100163598072', '100100163598073', '100100163598094',
  '100100163598024', '100100163598074', '100100163598035', '100100163598075',
  '100100163598025', '100100163598076', '100100163598077', '100100163598078',
  '100100163598026', '100100163598079', '100100163598027', '100100163598080',
  '100100163598036', '100100163598028', '100100163598087', '100100163598081',
  '100100163598029', '100100163598030', '100100163598088', '100100163598089',
  '100100163598082'
];

function getRegionRoot(region) {
  return 'http://www.vybory.izbirkom.ru/region/amur?' +
    `action=show&vrn=100100163596966&tvd=${region}`;
}

function getSubregionResults(subregion) {
  return 'http://www.vybory.izbirkom.ru/region/amur' +
    `?action=show&vrn=100100163596966&tvd=${subregion}&type=465`;
}

async function main() {
  const browser = await puppeteer.launch({
    product: 'firefox',
    headless: false,
  });

  const page = await browser.newPage();
  await page.setDefaultNavigationTimeout(0);

  for (const region in REGION_TVDS) {
    // Load root page
    {
      await page.goto(getRegionRoot(region));
    }
  }
}

main().catch((e) => {
  console.error(e.stack);
  process.exit(1);
});
